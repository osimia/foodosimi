{% extends "base.html" %}

{% block content %}
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
<div id="phoneLoginModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
  <div class="flex items-center justify-center min-h-screen p-4">
    <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ -->
    <div id="modalBackdrop" class="fixed inset-0 bg-black bg-opacity-50 transition-opacity"></div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div class="bg-white rounded-lg max-w-md w-full mx-auto z-10 relative">
      <div class="flex justify-between items-center border-b p-4">
        <h2 class="text-xl font-semibold">–í—Ö–æ–¥</h2>
        <button type="button" class="text-gray-400 hover:text-gray-500" id="closeModal">
          <span class="text-2xl">&times;</span>
        </button>
      </div>
      
      <div class="p-6">
        <h3 class="text-lg font-medium mb-4">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
        
        <form method="post" action="{% url 'accounts:login' %}">
          {% csrf_token %}
          <div class="mb-6">
            <input type="tel" name="phone" id="phoneInput" 
                  class="w-full border border-gray-300 rounded-lg p-3 text-lg" 
                  placeholder="+7 __ __ __ __" 
                  required>
          </div>
          
          <button type="submit" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 rounded-lg transition">
            –í–æ–π—Ç–∏
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="max-w-6xl mx-auto">
  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ñ–æ–Ω–æ–º -->
  <div class="bg-gray-50 rounded-lg p-6">
    
    <!-- –®–∞–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
      <div class="flex items-center">
        <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center text-gray-400 text-3xl font-bold mr-4">
          <span>üë§</span>
        </div>
        <div>
          <h1 class="text-2xl font-bold">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</h1>
          <p class="text-gray-500">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
        </div>
      </div>
      <button class="open-login-modal bg-blue-600 text-white px-6 py-2.5 rounded-lg hover:bg-blue-700 transition font-medium">
        –í–æ–π—Ç–∏
      </button>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="border-b border-gray-200 mb-6">
      <ul class="flex flex-wrap -mb-px text-sm font-medium text-center">
        <li class="mr-2">
          <a href="#" class="inline-block p-4 border-b-2 border-blue-600 text-blue-600 rounded-t-lg active">–í—Å–µ –∑–∞—è–≤–∫–∏</a>
        </li>
        <li class="mr-2">
          <a href="#" class="inline-block p-4 border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 rounded-t-lg">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</a>
        </li>
        <li class="mr-2">
          <a href="#" class="inline-block p-4 border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 rounded-t-lg">–£—Å–ø–µ—à–Ω—ã–µ</a>
        </li>
        <li>
          <a href="#" class="inline-block p-4 border-b-2 border-transparent hover:border-gray-300 hover:text-gray-600 rounded-t-lg">–û—Ç–º–µ–Ω–µ–Ω–æ</a>
        </li>
      </ul>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      
      <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
      <div class="md:col-span-1">
        <div class="bg-white rounded-lg shadow p-6 mb-6">
          <div class="flex flex-col items-center">
            <div class="w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 text-4xl mb-4">
              ÔøΩ
            </div>
            <p class="text-xl font-bold mb-1">–ì–æ—Å—Ç—å</p>
            <p class="text-gray-500 mb-6">–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</p>
            
            <button class="open-login-modal w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition text-center mb-3">
              –í–æ–π—Ç–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
            </button>
          </div>
          
          <div class="border-t mt-6 pt-6">
            <ul class="space-y-3">
              <li>
                <a href="{% url 'cart:view_cart' %}" class="flex items-center text-gray-700 hover:text-blue-600 font-medium">
                  <span class="mr-3 text-lg">üõí</span> –ú–æ—è –∫–æ—Ä–∑–∏–Ω–∞
                </a>
              </li>
              <li>
                <a href="{% url 'orders:find_orders' %}" class="flex items-center text-gray-700 hover:text-blue-600 font-medium">
                  <span class="mr-3 text-lg">üì¶</span> –ù–∞–π—Ç–∏ –º–æ–∏ –∑–∞–∫–∞–∑—ã
                </a>
              </li>
              <li>
                <a href="{% url 'products:product_list' %}" class="flex items-center text-gray-700 hover:text-blue-600 font-medium">
                  <span class="mr-3 text-lg">üè™</span> –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="bg-white rounded-lg shadow p-6">
          <h3 class="text-lg font-semibold mb-4">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h3>
          <ul class="space-y-3">
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              <p class="text-gray-700">–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤</p>
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              <p class="text-gray-700">–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–æ–≤</p>
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              <p class="text-gray-700">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏</p>
            </li>
            <li class="flex items-start">
              <span class="text-green-500 mr-2">‚úì</span>
              <p class="text-gray-700">–õ–∏—á–Ω—ã–µ —Å–∫–∏–¥–∫–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</p>
            </li>
          </ul>
        </div>
      </div>
          
          <!-- –ë–ª–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold text-blue-800 mb-2">–•–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã?</h3>
              <p class="text-blue-600">–í–æ–π–¥–∏—Ç–µ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤</p>
            </div>
            <button class="open-login-modal bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition whitespace-nowrap">
              –í–æ–π—Ç–∏
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const modal = document.getElementById('phoneLoginModal');
    const closeBtn = document.getElementById('closeModal');
    const backdrop = document.getElementById('modalBackdrop');
    const loginButtons = document.querySelectorAll('.open-login-modal');
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function openModal() {
      modal.classList.remove('hidden');
      document.body.classList.add('overflow-hidden');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function closeModal() {
      modal.classList.add('hidden');
      document.body.classList.remove('overflow-hidden');
    }
    
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞
    loginButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        openModal();
      });
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
    closeBtn.addEventListener('click', closeModal);
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–æ–Ω
    backdrop.addEventListener('click', closeModal);
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    const phoneInput = document.getElementById('phoneInput');
    if (phoneInput) {
      phoneInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.startsWith('992')) {
          // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∫–∞–∫ +992 XX XXX XX XX
          if (value.length > 3) {
            value = '+' + value.substring(0, 3) + ' ' + value.substring(3);
          }
          if (value.length > 7) {
            value = value.substring(0, 7) + ' ' + value.substring(7);
          }
          if (value.length > 11) {
            value = value.substring(0, 11) + ' ' + value.substring(11);
          }
          if (value.length > 14) {
            value = value.substring(0, 14) + ' ' + value.substring(14, 16);
          }
        } else if (value) {
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ–≥–æ –Ω–µ –≤–≤—ë–ª
          value = '+992' + value;
        } else {
          value = '+992 ';
        }
        
        e.target.value = value;
      });
    }
  });
</script>
{% endblock %}
